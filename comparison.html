<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CIMUnit: Comparison of CIMUnit to IMUnit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CIMUnit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Comparison of CIMUnit to IMUnit </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>CIMUnit and IMUnit are frameworks to support multithreaded testing. The main difference between them is that IMUnit is written in Java to support the testing of Java programs and that CIMUnit is a port of IMUnit to C and C++. There are syntactical differences between them due to the differences between Java and C. Additionally there are limitations in CIMUnit that don't exist in IMUnit due to the added features of the Java Virtual Machine that don't exist in the threading libraries supported by the current implementation of CIMUnit.</p>
<p>Below is a table documenting the differing capabilities between CIMUnit and IMUnit.</p>
<table class="doxtable">
<tr>
<td><b>Feature</b> </td><td><b>IMUnit</b> </td><td><b>CIMUnit<br/>
pthreads</b> </td><td><b>CIMUnit<br/>
VxWorks</b>  </td></tr>
<tr>
<td><b>Basic Events</b> </td><td>Yes </td><td>Yes </td><td>Yes  </td></tr>
<tr>
<td><b>Logically Combined Events</b> </td><td>Yes </td><td>Yes </td><td>Yes  </td></tr>
<tr>
<td><b>Named Threads</b> </td><td>Yes </td><td>Parital see <a class="el" href="comparison.html#named_threads_pthread">Named Threads in pthreads</a> </td><td>Parital see <a class="el" href="comparison.html#named_threads_vxworks">Named Threads in VxWorks</a>  </td></tr>
<tr>
<td><b>Block Events</b> </td><td>Yes </td><td>No see <a class="el" href="comparison.html#block_pthreads">Block Events in pthreads</a> </td><td>No see <a class="el" href="comparison.html#block_vxworks">Block Events in VxWorks</a>  </td></tr>
<tr>
<td><b>Deadlock Detection</b> </td><td>Yes </td><td>No see <a class="el" href="comparison.html#deadlock_pthreads_vxworks">Deadlock Detection in ptheads / VxWorks</a> </td><td>No see <a class="el" href="comparison.html#deadlock_pthreads_vxworks">Deadlock Detection in ptheads / VxWorks</a>  </td></tr>
</table>
<h2><a class="anchor" id="named_threads_pthread"></a>
Named Threads in pthreads</h2>
<p>Pthreads doesn't support a standard way to name threads. There is a collection of non-portable calls that allow applications to name threads, but at least one modern implementation of Linux (centos) doesn't support those methods. It is possible to autodetect at compile time which pthread capabilities exist, however, the test code would need to be written to not rely upon thead names being picked up from the operating system.</p>
<h2><a class="anchor" id="named_threads_vxworks"></a>
Named Threads in VxWorks</h2>
<p>VxWorks supports named threads and thus can fully implement this capability. At this time, the exact same code running for ptheads has been ported and the full capabilities of VxWorks haven't been leveraged.</p>
<h2><a class="anchor" id="block_pthreads"></a>
Block Events in pthreads</h2>
<p>Pthreads has no concept of thread status and therefore there is no platform independent method to determine if a thread is blocked or not. This limits us to the capabilities of the host operating system. There are a few options that can be explored to get the status of threads in Linux and BSD systems:</p>
<ul>
<li>Review the code of the <code>ps</code> command to determine how it gets status.<ul>
<li>This will likely require different code for different operating systems and perhaps different code for different versions of the same operating system.</li>
<li>Applicable to Linux &amp; BSD</li>
</ul>
</li>
<li>Investigate ptrace or similar libraries such as strace, dtrace, etc...<ul>
<li>This may provide a realtivly common way to access thread status.</li>
<li>Applicable to Linux &amp; BSD</li>
</ul>
</li>
<li>Investigate the use of the Pin library to instrument the test code.<ul>
<li>This solution can likely be used to approximate if a thread is blocked by checking if we are in a system call that may block. If so, we would assume that we are blocked.</li>
<li>Pin seems to have a non-trivial learning curve.</li>
<li>Applicable to Intel Linux. The ARM Linux and OS X port are out of date.</li>
</ul>
</li>
<li>Investigate the use of the /proc filesystem<ul>
<li>Text processing of task information may be slow.</li>
<li>Applicable to Linux only.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="block_vxworks"></a>
Block Events in VxWorks</h2>
<p>VxWorks has the capability to determine if a thread is blocked or not. This capability hasn't been implemented in CIMUnit at this time.</p>
<h2><a class="anchor" id="deadlock_pthreads_vxworks"></a>
Deadlock Detection in ptheads / VxWorks</h2>
<p>Currently deadlock detection isn't implemented in pthreads or VxWorks due to technical limitations. I suspect that in Java, the JVM is able to identify all threads associated with an applications and identify if they are blocked or not. The first challenge is that neither ptheads nor VxWorks has the capability of identifying which collection of threads are associated with an application. This may be worked around by configuring the environment with the thread identifiers/thread name of relevant tasks, but this seems to be a rather significant hinderance to the use of CIMUnit. The second challenge is that there is no way to determine if a pthread task is blocked. </p>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 1 2011 22:05:25 for CIMUnit by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
